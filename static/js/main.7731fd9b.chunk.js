(this.webpackJsonpbgm_ui=this.webpackJsonpbgm_ui||[]).push([[0],{27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),r=c(19),l=c.n(r),i=(c(27),c(7)),o=c(3),u=(c(28),c(4)),j=(c(29),c.p+"static/media/logo.86e7cd73.png");function h(e){var t=Object(a.useState)(!1),c=Object(u.a)(t,2),s=c[0],r=c[1],l=function(e){console.log(e),"Space"===e.code&&r(!0)};return Object(a.useEffect)((function(){document.addEventListener("keydown",l)}),[]),s?Object(n.jsx)(o.a,{to:"/select"}):Object(n.jsxs)("div",{className:"splashpage",children:[Object(n.jsxs)("div",{className:"title",children:["B",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"N"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"N"}),Object(n.jsx)("span",{className:"second",children:"A"}),"G",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"R"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"M"}),"\xa0 M",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"S"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"L"}),Object(n.jsx)("span",{className:"second",children:"A"})]}),Object(n.jsxs)("div",{className:"logocontainer",children:[Object(n.jsx)("img",{src:j,alt:"Logo",className:"splash-logo"}),Object(n.jsx)("p",{className:"startgame",children:"Press space to begin"})]})]})}var d=c(21),b=c(8),f=c(9),O=c(11),p=c.n(O),m="ABCDEFGHIJKLMNOPQRSTUVWXYZ",x="https://bananagarammasala.herokuapp.com/",v=(c(37),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""));function g(e){var t=e.letter,c=e.count,a=c>0?"available":"unavailable";return Object(n.jsxs)("div",{className:"letterbox ".concat(a),children:[t,c>0&&Object(n.jsx)("span",{className:"circle",children:c})]})}function w(e){var t=e.letterCounts,c=[];return v.forEach((function(e,a){c.push(Object(n.jsx)(g,{letter:e,count:t[e]},e))})),Object(n.jsx)("div",{className:"palette",children:c})}c(38);var N="*";function y(e){return e.split("").reduce((function(e,t){return e.has(t)||e.set(t,0),e.set(t,e.get(t)+1),e}),new Map)}function k(e,t,c){return e.has(t)?e.get(t):c}function C(e){var t=e.answer,c=e.callbacks,s=c.hasEnoughLetters,r=c.adjustCounts,l=c.gotAnswerCorrect,i=Object(a.useState)(""),o=Object(u.a)(i,2),j=o[0],h=o[1],d=Object(a.useState)(!1),O=Object(u.a)(d,2),p=O[0],x=O[1],v=function(e){if(x(!1),e=e.toUpperCase(),n=e.replace(N,""),/^[a-zA-Z\*]*$/.test(n.replace(" ",""))){var c=function(e,t){var c=y(e),n=y(t),a=new Map;return m.split("").forEach((function(e){a.set(e,k(n,e,0)-k(c,e,0))})),a}(j.replace(" ","").replace(N,""),e.replace(" ","").replace(N,""));(function(e){for(var t=0;t<m.length;t++){var c=m.charAt(t);if(!s(c,k(e,c,0)))return!1}return!0})(c)&&(r(c),h(e),e.replace(" ","").replace(N,"")===t.replace(" ","").replace(N,"")&&l(e))}var n},g=function(){x(!1),setTimeout((function(){x(!0)}),1e3)};return Object(n.jsxs)("div",{className:"answerContainer",children:[Object(n.jsx)("input",{type:"text",value:j,onChange:function(e){return v(e.target.value)},disabled:j.replace(" ","")===t.replace(" ",""),onFocus:function(){return v("")},onBlur:g}),j.replace(" ","")===t.replace(" ","")?Object(n.jsx)(b.a,{icon:f.a,color:"green",size:"lg"}):p&&Object(n.jsx)("i",{className:"hintButton",onClick:function(){v(t.split("").reduce((function(e,t){return Math.random()<.4?e+=t:e+=N,e}),"")),g()},children:Object(n.jsx)(b.a,{icon:f.b,color:"#aaa",size:"lg"})})]})}function S(e){var t=e.clue,c=e.answer,a=e.answerCallbacks;return Object(n.jsxs)("div",{className:"clueContainer",children:[Object(n.jsx)("div",{className:"clue",children:t}),Object(n.jsx)(C,{className:"answer",answer:c,callbacks:a})]})}function A(e){var t=e.clues,c=e.answerCallbacks,a=[];return t.forEach((function(e,t){a.push(Object(n.jsx)(S,{clue:e.clue,answer:e.answer,answerCallbacks:c},t))})),Object(n.jsx)("div",{className:"container",children:a})}c(39),c(40);function E(e){var t=e.videoURL;return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Happy Birthday, Melody!"}),Object(n.jsx)("h2",{children:"Those clues were a group effort. So's this."}),Object(n.jsx)("iframe",{title:"video",width:"560",height:"315",src:t,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}function M(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{alt:"BGM logo",src:j,className:"logo"}),Object(n.jsx)("h1",{children:"You win!"})]})}function F(e){return Object(n.jsx)("div",{className:"victorycard",children:e.birthday?Object(n.jsx)(E,{videoURL:"https://www.youtube.com/embed/8E4cQHejFq0"}):Object(n.jsx)(M,{})})}function B(e){return e.reduce((function(e,t){return t.answer.split("").forEach((function(t){e[t]+=1})),e}),m.split("").reduce((function(e,t){return e[t]=0,e}),{}))}function L(e){var t=Object(a.useState)([]),c=Object(u.a)(t,2),s=c[0],r=c[1],l=Object(a.useState)(""),i=Object(u.a)(l,2),j=i[0],h=i[1],O=Object(a.useState)(3),m=Object(u.a)(O,2),v=m[0],g=m[1],N=Object(a.useState)(0),y=Object(u.a)(N,2),k=y[0],C=y[1],S=Object(a.useState)({}),E=Object(u.a)(S,2),M=E[0],L=E[1],I=Object(a.useState)(!0),T=Object(u.a)(I,2),H=T[0],U=T[1],G=Object(o.g)().clueSet;Object(a.useEffect)((function(){fetch("".concat(x,"/").concat(G)).then((function(e){return e.json()})).then((function(e){r(e.clues),L(B(e.clues.slice(0,3))),h(e.details),U(!1)})).catch(console.log)}),[]);var P=function(e){var t=Object(d.a)({},M);e.forEach((function(e,c){var n=M[c]-=e;t[c]=n})),L(t)};return H?Object(n.jsx)("h1",{children:"Loading..."}):k<s.length?Object(n.jsxs)("div",{className:"gameboard",children:[Object(n.jsx)("div",{className:"details",children:j}),Object(n.jsxs)("div",{className:"gameContainer",children:[Object(n.jsx)("div",{className:"clues",children:Object(n.jsx)(A,{clues:s.slice(0,v),answerCallbacks:{hasEnoughLetters:function(e,t){return M[e]>=t},adjustCounts:P,gotAnswerCorrect:function(e){e=e.replace(" ","");var t=function(e){var t=B(e);return Object.keys(t).reduce((function(e,c){return e.set(c,-1*t[c]),e}),new Map)}(s.slice(v,v+Math.floor(e.length/2)));P(t),g(Math.min(v+Math.floor(e.length/2),s.length)),C(k+1)}}})}),Object(n.jsx)("div",{className:"letters",children:Object(n.jsx)(w,{letterCounts:M})})]}),Object(n.jsx)("i",{className:"help",onClick:function(){p.a.fire({title:"Welcome to BananaGaram Masala!",icon:"question",width:"70%",html:"\n      <p>\n        Each clue in the game corresponds to a word or short phrase, and your goal \n        is to figure out each of these solutions. \n      </p>\n      <p>\n        On the left side of the game board, you'll see the list of clues you've \n        unlocked, and text fields to enter your guess. Once you've solved a clue,\n        you'll no longer be able to change your guess.\n      </p>\n      <p>\n        On the right side of the game board, you'll see the letter pane. This pane \n        shows you how many of each letter you have available to solve the clues. \n        Each time you solve a clue, you'll unlock more clues and letters.\n      </p>\n      <p>\n        If you're stuck on a clue, click the grey question mark to its right to see \n        some of the letters in the answer. \n      </p>\n    "})},children:Object(n.jsx)(b.a,{icon:f.c,color:"#333",size:"lg"})})]}):Object(n.jsx)(F,{birthday:"birthday"===G})}c(41),c(42);function I(){return Object(n.jsx)("img",{src:j,alt:"loading",className:"spinner"})}function T(e){var t,c=e.clueSet,a=e.clickHandler,s="".concat("/bananagarammasala","/").concat(c,".png");return Object(n.jsx)("div",{className:"cardContainer",onClick:a,children:Object(n.jsxs)("div",{className:"cardContainerInner",children:[Object(n.jsx)("div",{className:"cardFront",children:Object(n.jsx)("img",{className:"levelImage",src:s,alt:"{clueSet}"})}),Object(n.jsx)("div",{className:"cardBack",children:Object(n.jsx)("div",{className:"clueSetTitle",children:(t=c,t.charAt(0).toUpperCase()+t.slice(1))})})]})})}function H(){p.a.fire({title:"I'm not artistic enough to make those icons, so I have these people to thank:",html:'<ul><li><a href="https://www.flaticon.com/authors/photo3idea-studio" title="photo3idea_studio">photo3idea_studio</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></li><li><a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></li><li><a href="https://www.flaticon.com/authors/turkkub" title="turkkub">turkkub</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></li></ul>',width:800})}function U(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(""),l=Object(u.a)(r,2),i=l[0],j=l[1];Object(a.useEffect)((function(){fetch("".concat(x,"/cluesets")).then((function(e){return e.json()})).then((function(e){s(e.cluesets)})).catch(console.log)}),[]);var h=c.reduce((function(e,t){return e.push(Object(n.jsx)(T,{clueSet:t,clickHandler:function(){return j(t)}})),e}),[]);return c?i?Object(n.jsx)(o.a,{to:"/play/".concat(i)}):Object(n.jsxs)("div",{className:"levelselectcontainer",children:[Object(n.jsx)("div",{className:"cardsContainer",children:h}),Object(n.jsx)("button",{className:"attributions",onClick:H,children:"Attributions"})]}):Object(n.jsx)(I,{})}var G=function(){return Object(n.jsx)(i.a,{basename:"/",children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{path:"/play/:clueSet",children:Object(n.jsx)(L,{})}),Object(n.jsx)(o.b,{path:"/select",children:Object(n.jsx)(U,{})}),Object(n.jsx)(o.b,{path:"/",children:Object(n.jsx)(h,{})})]})})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),P()}},[[43,1,2]]]);
//# sourceMappingURL=main.7731fd9b.chunk.js.map