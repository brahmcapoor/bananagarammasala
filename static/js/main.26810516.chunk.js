(this.webpackJsonpbgm_ui=this.webpackJsonpbgm_ui||[]).push([[0],{27:function(e,t,c){},28:function(e,t,c){},29:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(1),s=c.n(a),r=c(19),l=c.n(r),i=(c(27),c(7)),o=c(3),u=(c(28),c(4)),j=(c(29),c.p+"static/media/logo.86e7cd73.png");function h(e){var t=Object(a.useState)(!1),c=Object(u.a)(t,2),s=c[0],r=c[1],l=function(e){console.log(e),"Space"===e.code&&r(!0)};return Object(a.useEffect)((function(){document.addEventListener("keydown",l)}),[]),s?Object(n.jsx)(o.a,{to:"/select"}):Object(n.jsxs)("div",{className:"splashpage",children:[Object(n.jsxs)("div",{className:"title",children:["B",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"N"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"N"}),Object(n.jsx)("span",{className:"second",children:"A"}),"G",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"R"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"M"}),"\xa0 M",Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"S"}),Object(n.jsx)("span",{className:"second",children:"A"}),Object(n.jsx)("span",{className:"first",children:"L"}),Object(n.jsx)("span",{className:"second",children:"A"})]}),Object(n.jsxs)("div",{className:"logocontainer",children:[Object(n.jsx)("img",{src:j,alt:"Logo",className:"splash-logo"}),Object(n.jsx)("p",{className:"startgame",children:"Press space to begin"})]})]})}var d=c(21),b=c(8),f=c(9),O=c(11),p=c.n(O);c(37);function m(){return Object(n.jsx)("img",{src:j,alt:"loading",className:"spinner"})}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZ",v="https://bananagarammasala.herokuapp.com/",g=(c(38),"ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""));function w(e){var t=e.letter,c=e.count,a=c>0?"available":"unavailable";return Object(n.jsxs)("div",{className:"letterbox ".concat(a),children:[t,c>0&&Object(n.jsx)("span",{className:"circle",children:c})]})}function N(e){var t=e.letterCounts,c=[];return g.forEach((function(e,a){c.push(Object(n.jsx)(w,{letter:e,count:t[e]},e))})),Object(n.jsx)("div",{className:"palette",children:c})}c(39);var y="*";function k(e){return e.split("").reduce((function(e,t){return e.has(t)||e.set(t,0),e.set(t,e.get(t)+1),e}),new Map)}function C(e,t,c){return e.has(t)?e.get(t):c}function S(e){var t=e.answer,c=e.callbacks,s=c.hasEnoughLetters,r=c.adjustCounts,l=c.gotAnswerCorrect,i=Object(a.useState)(""),o=Object(u.a)(i,2),j=o[0],h=o[1],d=Object(a.useState)(!1),O=Object(u.a)(d,2),p=O[0],m=O[1],v=function(e){if(m(!1),e=e.toUpperCase(),n=e.replace(y,""),/^[a-zA-Z\*]*$/.test(n.replace(" ",""))){var c=function(e,t){var c=k(e),n=k(t),a=new Map;return x.split("").forEach((function(e){a.set(e,C(n,e,0)-C(c,e,0))})),a}(j.replace(" ","").replace(y,""),e.replace(" ","").replace(y,""));(function(e){for(var t=0;t<x.length;t++){var c=x.charAt(t);if(!s(c,C(e,c,0)))return!1}return!0})(c)&&(r(c),h(e),e.replace(" ","").replace(y,"")===t.replace(" ","").replace(y,"")&&l(e))}var n},g=function(){m(!1),setTimeout((function(){m(!0)}),1e3)};return Object(n.jsxs)("div",{className:"answerContainer",children:[Object(n.jsx)("input",{type:"text",value:j,onChange:function(e){return v(e.target.value)},disabled:j.replace(" ","")===t.replace(" ",""),onFocus:function(){return v("")},onBlur:g}),j.replace(" ","")===t.replace(" ","")?Object(n.jsx)(b.a,{icon:f.a,color:"green",size:"lg"}):p&&Object(n.jsx)("i",{className:"hintButton",onClick:function(){v(t.split("").reduce((function(e,t){return Math.random()<.4?e+=t:e+=y,e}),"")),g()},children:Object(n.jsx)(b.a,{icon:f.b,color:"#aaa",size:"lg"})})]})}function A(e){var t=e.clue,c=e.answer,a=e.answerCallbacks;return Object(n.jsxs)("div",{className:"clueContainer",children:[Object(n.jsx)("div",{className:"clue",children:t}),Object(n.jsx)(S,{className:"answer",answer:c,callbacks:a})]})}function E(e){var t=e.clues,c=e.answerCallbacks,a=[];return t.forEach((function(e,t){a.push(Object(n.jsx)(A,{clue:e.clue,answer:e.answer,answerCallbacks:c},t))})),Object(n.jsx)("div",{className:"container",children:a})}c(40),c(41);function M(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Happy Birthday, Melody!"}),Object(n.jsx)("h2",{children:"We couldn't all wish you in person. We still wanted to try. "}),Object(n.jsx)("iframe",{title:"video",width:"560",height:"315",src:"https://www.youtube-nocookie.com/embed/brJfMWBTzjc?start=1",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]})}function B(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{alt:"BGM logo",src:j,className:"logo"}),Object(n.jsx)("h1",{children:"You win!"})]})}function F(e){return Object(n.jsx)("div",{className:"victorycard",children:e.birthday?Object(n.jsx)(M,{}):Object(n.jsx)(B,{})})}function I(e){return e.reduce((function(e,t){return t.answer.split("").forEach((function(t){e[t]+=1})),e}),x.split("").reduce((function(e,t){return e[t]=0,e}),{}))}function L(e){var t=Object(a.useState)([]),c=Object(u.a)(t,2),s=c[0],r=c[1],l=Object(a.useState)(""),i=Object(u.a)(l,2),j=i[0],h=i[1],O=Object(a.useState)(3),x=Object(u.a)(O,2),g=x[0],w=x[1],y=Object(a.useState)(0),k=Object(u.a)(y,2),C=k[0],S=k[1],A=Object(a.useState)({}),M=Object(u.a)(A,2),B=M[0],L=M[1],T=Object(a.useState)(!0),W=Object(u.a)(T,2),z=W[0],G=W[1],H=Object(o.g)().clueSet;Object(a.useEffect)((function(){fetch("".concat(v,"/").concat(H)).then((function(e){return e.json()})).then((function(e){r(e.clues),L(I(e.clues.slice(0,3))),h(e.details),G(!1)})).catch(console.log)}),[]);var J=function(e){var t=Object(d.a)({},B);e.forEach((function(e,c){var n=B[c]-=e;t[c]=n})),L(t)};return z?Object(n.jsx)(m,{}):C<s.length?Object(n.jsxs)("div",{className:"gameboard",children:[Object(n.jsx)("div",{className:"details",children:j}),Object(n.jsxs)("div",{className:"gameContainer",children:[Object(n.jsx)("div",{className:"clues",children:Object(n.jsx)(E,{clues:s.slice(0,g),answerCallbacks:{hasEnoughLetters:function(e,t){return B[e]>=t},adjustCounts:J,gotAnswerCorrect:function(e){e=e.replace(" ","");var t=function(e){var t=I(e);return Object.keys(t).reduce((function(e,c){return e.set(c,-1*t[c]),e}),new Map)}(s.slice(g,g+Math.floor(e.length/2)));J(t),w(Math.min(g+Math.floor(e.length/2),s.length)),S(C+1)}}})}),Object(n.jsx)("div",{className:"letters",children:Object(n.jsx)(N,{letterCounts:B})})]}),Object(n.jsx)("i",{className:"help",onClick:function(){p.a.fire({title:"Welcome to BananaGaram Masala!",icon:"question",width:"70%",html:"\n      <p>\n        Each clue in the game corresponds to a word or short phrase, and your goal \n        is to figure out each of these solutions. \n      </p>\n      <p>\n        On the left side of the game board, you'll see the list of clues you've \n        unlocked, and text fields to enter your guess. Once you've solved a clue,\n        you'll no longer be able to change your guess.\n      </p>\n      <p>\n        On the right side of the game board, you'll see the letter pane. This pane \n        shows you how many of each letter you have available to solve the clues. \n        Each time you solve a clue, you'll unlock more clues and letters.\n      </p>\n      <p>\n        If you're stuck on a clue, click the grey question mark to its right to see \n        some of the letters in the answer. \n      </p>\n    "})},children:Object(n.jsx)(b.a,{icon:f.c,color:"#333",size:"lg"})})]}):Object(n.jsx)(F,{birthday:"birthday"===H})}c(42);function T(e){var t,c=e.clueSet,a=e.clickHandler,s="".concat("/bananagarammasala","/").concat(c,".png");return Object(n.jsx)("div",{className:"cardContainer",onClick:a,children:Object(n.jsxs)("div",{className:"cardContainerInner",children:[Object(n.jsx)("div",{className:"cardFront",children:Object(n.jsx)("img",{className:"levelImage",src:s,alt:"{clueSet}"})}),Object(n.jsx)("div",{className:"cardBack",children:Object(n.jsx)("div",{className:"clueSetTitle",children:(t=c,t.charAt(0).toUpperCase()+t.slice(1))})})]})})}function W(){p.a.fire({title:"I'm not artistic enough to make those icons, so I have these people to thank:",html:'<ul><li><a href="https://www.flaticon.com/authors/photo3idea-studio" title="photo3idea_studio">photo3idea_studio</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></li><li><a href="https://www.flaticon.com/authors/smashicons" title="Smashicons">Smashicons</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></li><li><a href="https://www.flaticon.com/authors/turkkub" title="turkkub">turkkub</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></li></ul>',width:800})}function z(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],s=t[1],r=Object(a.useState)(""),l=Object(u.a)(r,2),i=l[0],j=l[1],h=Object(a.useState)(!0),d=Object(u.a)(h,2),b=d[0],f=d[1];Object(a.useEffect)((function(){fetch("".concat(v,"/cluesets")).then((function(e){return e.json()})).then((function(e){s(e.cluesets),f(!1)})).catch(console.log)}),[]);var O=c.reduce((function(e,t){return e.push(Object(n.jsx)(T,{clueSet:t,clickHandler:function(){return j(t)}})),e}),[]);return b?Object(n.jsx)(m,{}):i?Object(n.jsx)(o.a,{to:"/play/".concat(i)}):Object(n.jsxs)("div",{className:"levelselectcontainer",children:[Object(n.jsx)("div",{className:"cardsContainer",children:O}),Object(n.jsx)("button",{className:"attributions",onClick:W,children:"Attributions"})]})}var G=function(){return Object(n.jsx)(i.a,{basename:"/",children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(o.d,{children:[Object(n.jsx)(o.b,{path:"/play/:clueSet",children:Object(n.jsx)(L,{})}),Object(n.jsx)(o.b,{path:"/select",children:Object(n.jsx)(z,{})}),Object(n.jsx)(o.b,{path:"/",children:Object(n.jsx)(h,{})})]})})})},H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),H()}},[[43,1,2]]]);
//# sourceMappingURL=main.26810516.chunk.js.map